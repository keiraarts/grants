{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport { apiUrl } from \"../src/client/baseUrl\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport { useStoreActions, useStoreState } from \"easy-peasy\";\nimport Link from \"next/link\";\nexport default function Register() {\n  _s();\n\n  var setAuth = useStoreActions(function (dispatch) {\n    return dispatch.user.setAuth;\n  });\n  var auth = useStoreState(function (state) {\n    return state.user.auth;\n  });\n  var history = useHistory();\n  if (auth && auth.username) history.push(\"/\");\n\n  var _useState = useState({\n    username: \"\",\n    password: \"\",\n    submitting: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      loginData = _useState2[0],\n      setLoginData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      submitting = _useState4[0],\n      setSubmitting = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      submitted = _useState6[0],\n      setSubmitted = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      err = _useState8[0],\n      setErr = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      logged = _useState10[0],\n      setLogged = _useState10[1];\n\n  var submit = function submit(e) {\n    e.preventDefault();\n    setErr(false);\n    setSubmitting(true);\n    fetch(\"\".concat(apiUrl(), \"/loginUser\"), {\n      method: \"POST\",\n      body: JSON.stringify(loginData),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data && data.username) {\n        setAuth(data);\n        setLogged(true);\n      } else {\n        setSubmitting(false);\n        setErr(\"Your login credentials were incorrect\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-block\"\n  }, logged && /*#__PURE__*/React.createElement(Redirect, {\n    href: \"/\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-l text-b\"\n  }, \"User Login\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"margin-top\"\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submit\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__group field\"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form__field\",\n    placeholder: \"Username\",\n    name: \"username\",\n    id: \"username\",\n    required: true,\n    maxLength: \"100\",\n    onChange: function onChange(e) {\n      return setLoginData(_objectSpread(_objectSpread({}, loginData), {}, {\n        username: e.target.value\n      }));\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__label\"\n  }, \"Username or Email\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__group field\"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form__field\",\n    placeholder: \"Password\",\n    name: \"password\",\n    id: \"password\",\n    maxLength: \"100\",\n    required: true,\n    onChange: function onChange(e) {\n      return setLoginData(_objectSpread(_objectSpread({}, loginData), {}, {\n        password: e.target.value\n      }));\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__label\"\n  }, \"Password\")), err && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"margin-top-s text-s text-err\"\n  }, err), submitting && !submitted && !logged ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"margin-top-s text-s text-grey\"\n  }, \"Logging in..\") : /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Log In\",\n    className: \"submit-button\"\n  }), \"\\xA0\\xA0\\xA0or\\xA0\\xA0\", /*#__PURE__*/React.createElement(Link, {\n    href: \"/register\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/register\",\n    className: \"text-m text-grey pointer\"\n  }, \"Register an Account\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(Link, {\n    href: \"/forgotpassword\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/forgotpassword\",\n    className: \"margin-top text-s text-grey pointer\"\n  }, \"Forgot your password?\"))))));\n}\n\n_s(Register, \"kkEahe+l6m9djD+vCNDN1mjfh3s=\", false, function () {\n  return [useStoreActions, useStoreState, useHistory];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/kirilclimson/grants/pages/login.js"],"names":["React","useState","apiUrl","Redirect","useHistory","useStoreActions","useStoreState","Link","Register","setAuth","dispatch","user","auth","state","history","username","push","password","submitting","loginData","setLoginData","setSubmitting","submitted","setSubmitted","err","setErr","logged","setLogged","submit","e","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","json","data","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { apiUrl } from \"../src/client/baseUrl\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport { useStoreActions, useStoreState } from \"easy-peasy\";\nimport Link from \"next/link\";\n\nexport default function Register() {\n  const setAuth = useStoreActions((dispatch) => dispatch.user.setAuth);\n  const auth = useStoreState((state) => state.user.auth);\n  const history = useHistory();\n\n  if (auth && auth.username) history.push(\"/\");\n\n  const [loginData, setLoginData] = useState({\n    username: \"\",\n    password: \"\",\n    submitting: false,\n  });\n\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [err, setErr] = useState(false);\n  const [logged, setLogged] = useState(false);\n  const submit = (e) => {\n    e.preventDefault();\n    setErr(false);\n    setSubmitting(true);\n    fetch(`${apiUrl()}/loginUser`, {\n      method: \"POST\",\n      body: JSON.stringify(loginData),\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data && data.username) {\n          setAuth(data);\n          setLogged(true);\n        } else {\n          setSubmitting(false);\n          setErr(\"Your login credentials were incorrect\");\n        }\n      });\n  };\n\n  return (\n    <div className=\"content-block\">\n      {logged && <Redirect href=\"/\" />}\n      <div className=\"text-l text-b\">User Login</div>\n      <div className=\"margin-top\">\n        <form onSubmit={submit}>\n          <div className=\"form__group field\">\n            <input\n              type=\"text\"\n              className=\"form__field\"\n              placeholder=\"Username\"\n              name=\"username\"\n              id=\"username\"\n              required\n              maxLength=\"100\"\n              onChange={(e) =>\n                setLoginData({ ...loginData, username: e.target.value })\n              }\n            />\n            <label className=\"form__label\">Username or Email</label>\n          </div>\n          <div className=\"form__group field\">\n            <input\n              type=\"password\"\n              className=\"form__field\"\n              placeholder=\"Password\"\n              name=\"password\"\n              id=\"password\"\n              maxLength=\"100\"\n              required\n              onChange={(e) =>\n                setLoginData({ ...loginData, password: e.target.value })\n              }\n            />\n            <label className=\"form__label\">Password</label>\n          </div>\n          {err && <div className=\"margin-top-s text-s text-err\">{err}</div>}\n          {submitting && !submitted && !logged ? (\n            <div className=\"margin-top-s text-s text-grey\">Logging in..</div>\n          ) : (\n            <div>\n              <input type=\"submit\" value=\"Log In\" className=\"submit-button\" />\n              &nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;\n              <Link href=\"/register\">\n                <a href=\"/register\" className=\"text-m text-grey pointer\">\n                  Register an Account\n                </a>\n              </Link>\n              <br />\n              <Link href=\"/forgotpassword\">\n                <a\n                  href=\"/forgotpassword\"\n                  className=\"margin-top text-s text-grey pointer\"\n                >\n                  Forgot your password?\n                </a>\n              </Link>\n            </div>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}